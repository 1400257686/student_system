<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="layui/css/layui.css"  media="all">
    <link rel="stylesheet" href="css/adminLogin.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="layui/layui.js" charset="utf-8"></script>
</head>
<body>
<table class="layui-hide" id="test3" lay-filter="test3"></table>
<script th:inline="javascript">
    layui.use('table', function() {
        var table = layui.table;
        table.render({
            elem: '#test3'
            , url: '/score/findbycno?cno=' + [[${cno}]]
            , cellMinWidth: 80
            , cols: [
                [
                    {field: 'cno', title: '课程号'}
                    ,{field: 'sno', title: '学号', sort: true}
                    ,{field: 'sname', title: '学生姓名'}
                    ,{field: 'score', "edit":"number",title: '成绩',event: "dataCol"}
                ]
            ]
            , page: true
        });
    });
</script>
<script>
    layui.use(['table', 'util'], function(){
        var table = layui.table
            ,util = layui.util;
        table.on('tool(test3)', function(obj){
            if (obj.event =="dataCol"){
                dataCol=obj;
                $("table input").attr("type","number");
            }
        });
        //监听单元格编辑
        table.on('edit(test3)', function(obj){
            var value = obj.value //得到修改后的值
                ,data = obj.data //得到所在行所有键值
                ,field = obj.field; //得到字段
            window.location.href ="/score/update?sno="+data.sno+"&cno="+data.cno+"&score="+data.score;
        });
    });
</script>

</body>
</html>